@model Kanban.Models.Tarea
@{
    Tablero tablero = ViewBag.Tablero;
    bool esPropietario = tablero.IdUsuarioPropietario == ViewBag.UsuarioId;
}

<div class="card mb-2 text-center w-100">
    <div class="card-body">
        <h6 class="card-title">@Model.Nombre</h6>
        <p class="card-text">@Model.Descripcion</p>
        <div class="d-flex justify-content-between align-items-center">
            <form asp-controller="Tarea" asp-action="cambiarEstadoTarea" method="post">
                <input type="hidden" name="id" value="@Model.Id" />
                <input type="hidden" name="estado" value="@((int)Model.Estado)" />
                <input type="hidden" name="direccion" value="2" />
                <input type="submit" class="btn btn-success bi bi-arrow-left" value="←">
            </form>
            @if(esPropietario)
            {
                <form asp-controller="Tarea" asp-action="eliminarTarea" method="post">
                    <input type="hidden" name="id" value="@Model.Id" />
                    <button type="submit" onclick="return confirm('¿Está seguro de eliminar?')" class="btn btn-danger">
                        <i class="bi bi-trash"></i>
                    </button>
                </form>
                <a type="submit" class="btn btn-primary" asp-route-id="@Model.Id" asp-controller="Tarea" asp-action="IrAModificarTarea">
                    <i class="bi bi-pencil"></i>
                </a>
            }
            <form asp-controller="Tarea" asp-action="cambiarEstadoTarea" method="post">
                <input type="hidden" name="id" value="@Model.Id" />
                <input type="hidden" name="estado" value="@((int)Model.Estado)" />
                <input type="hidden" name="direccion" value="1" />
                <input type="submit" class="btn btn-success" value="→">
            </form>
        </div>
    </div>
</div>
